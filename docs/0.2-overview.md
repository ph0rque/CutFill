# Overview: 3D Cut-and-Fill Earthworks Visualization Game

This document summarizes a game concept focusing on the 3D visualization of cut-and-fill earthworks. It draws from the grid method in [Kubla Software's article](https://www.kublasoftware.com/calculating-earthworks-cut-fill-with-a-spreadsheet-grid-method/), focusing on interactive terrain manipulation without spreadsheets. The goal: Excavate (cut) and relocate (fill) dirt on a lot while maintaining net-zero off-lot volume, aligning with sustainable engineering and the [assignment's](docs/assigment.md) multiplayer prototyping requirements.

## Core Concept
- **Gameplay Loop**: Interact with a 3D grid-based lot (procedurally generated terrain). Cut from high areas and fill low ones; net-zero is enforced visually (e.g., imbalances cause site instability like collapses).
- **Hazards and Challenges**: Introduce dynamic elements like torrential downpours (causing erosion) or landslides (triggered by poor balancing), plus varied soil/rock types (e.g., clay that's sticky and hard to move vs. rocky terrain that requires more effort to excavate).
- **Net-Zero Mechanic**: Auto-calculates volumes but shows results through dynamic terrain changes and effects (numbers can be shown but are secondary).
- **Educational Tie-In**: Teaches cut-fill principles via hands-on play, fitting permaculture and civil engineering focus.

## Session Flow
- **Default Solo Play**: Players start directly into single-player assignments
- **Assignment Briefing**: 30-second overview of the level's construction goal
- **Puzzle Session**: 2-15 minutes to complete assignment at your own pace
- **Results & Learning**: Review completion status, efficiency metrics, and educational insights
- **Progression**: Unlock next level based on completion, or retry for better efficiency
- **Multiplayer Option**: Optional competitive mode where 2-4 players race on the same assignment

## Multiplayer Integration (Optional Mode)
- **Access**: Available as an optional mode after completing solo tutorial levels
- **Session Structure**: Quick 2-15 minute competitive rounds with 2-4 players per lot
- **Competition Format**: Players race to complete the same assignment (e.g., level marked area for house foundation) while maintaining net-zero earthworks
- **Scoring System**: 
  - Primary: Assignment completion (pass/fail)
  - Secondary: Net-zero achievement (required)
  - Tie-breaker: Speed of completion
  - Bonus points for efficiency (fewer operations to complete)
- **Real-time Collaboration**: All players work simultaneously on shared terrain with live sync
- **Fair Play**: All players start with identical tools and capabilities

## Levels and Progression
- **Assignment-Based Structure**: Each level presents a clear construction/landscaping assignment that must be completed within net-zero constraints
- **Example Assignments**:
  - **Foundation Prep**: Level a marked 10x10 area to within 1-foot elevation variance
  - **Drainage Channel**: Create a swale following marked path while maintaining overall site balance
  - **Building Pad**: Prepare multiple level areas for different structures (house, shed, garden beds)
  - **Site Preparation**: Clear and level access roads while managing water runoff
- **Solo Scoring Criteria**: 
  1. Assignment completion (required)
  2. Net-zero achievement (required) 
  3. Efficiency rating (based on number of operations)
  4. Star rating system (3 stars for optimal solutions)
- **Multiplayer Scoring**: Adds speed bonus (fastest completion wins) to the above criteria
- **Progressive Complexity**: Later levels introduce multiple assignments, tighter tolerances, and environmental hazards

## Educational Tracking and Assessment
- **Learning Outcomes Monitoring**: Track player understanding of cut-fill principles through gameplay metrics
- **Key Metrics**:
  - Volume estimation accuracy (before vs. after completion)
  - Strategy improvement over time (fewer unnecessary operations)
  - Hazard response learning (better reaction to erosion/stability issues)
  - Understanding of soil types and their properties
- **Progress Visualization**: Simple dashboards showing skill development in earthworks concepts
- **Knowledge Checks**: Optional mini-quizzes between levels to reinforce learning
- **Competency Badges**: Recognition for mastering specific earthworks skills (drainage, stability, efficiency)
- **Performance Analytics**: Track common mistakes and provide targeted feedback

## UX/UI Design
- **3D Visualization**: Isometric or 2.5D views with drag-to-edit cells; real-time dirt flow animations
- **Feedback**: Color overlays that are semi-transparent (red for cut-excess, blue for fill-needed) and a tipping balance meter
- **Accessibility**: Simple gestures, customizable views
- **Assignment Overlay**: Highlighted target areas and completion progress indicators
- **Multiplayer Indicators**: (Optional mode only) Clear visual distinction between players' actions and current tool ownership

## Making It Fun
- **Puzzle Elements**: Levels with goals (e.g., balance for building); hazards add challenge
- **Hazards for Engagement**: Torrential downpours flood unbalanced areas, while landslides punish over-cutting, turning mishaps into learning moments. Different soil/rock types add strategy (e.g., sandy soil shifts easily but erodes quickly, rocks block paths until broken)
- **Solo Challenge**: Personal best tracking and star rating system encourage optimization and mastery
- **Achievement System**: Unlock new tools, terrain types, or cosmetic elements through skilled play
- **Replayability**: Random generation and varied assignment types keep sessions fresh
- **Competitive Tension**: (Optional multiplayer mode) Real-time racing creates urgency while maintaining educational value

## Technical Overview
- **Platform**: Web browser only using Three.js for 3D visualization
- **Core Architecture**: Single-player focused with optional multiplayer capability
- **MVP Scope**: 
  - Basic 3D grid terrain manipulation
  - Assignment completion detection
  - Solo scoring and star rating system
  - Core educational tracking
  - Optional: Real-time multiplayer synchronization
  - Target: Buildable in 7 days with AI assistance
- **Performance Focus**: Optimized for smooth solo gameplay with responsive terrain interaction
- **Multiplayer Extension**: Quick-join lobbies supporting 2-4 players with automatic matchmaking (secondary priority)
- **Scalability**: Architecture supports future expansion to larger groups while maintaining solo-first design

## Future Vision
- **Integration into Permaculture Suite**: This game could standalone or integrate into a broader app suite for permaculture designers, with companion tools for soil analysis, water management, and planting simulations
- **Real-World Connection**: Later versions could tie into actual permaculture project planning and site assessment tools
- **Expanded Multiplayer**: Support for larger collaborative projects and design sharing
- **Advanced Features**: AR overlays for real sites, AI-driven suggestions, and mobile platform expansion
